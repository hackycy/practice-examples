<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>namespace1</title>
</head>

<body>
    <label>用户:</label>
    <input type="text" id="uname" /><br />

    <label>聊天内容:</label><br />
    <textarea id="content" style="height: 200px; width:300px;"></textarea>
    <br />
    <input id="sendMsg" type="text" />
    <button id="btn_send">发送</button>

    <!-- 首先引入 socket.io 客户端脚本-->
    <script src="https://cdn.bootcss.com/socket.io/2.2.0/socket.io.js"></script>
    <script type="text/javascript">
        var socket = io.connect("ws://localhost:3000");//连接服务端，因为本机使用localhost 所以connect(url)中url可以不填或写 http://localhost
        // 监听 receiveMsg 事件，用来接收其他客户端推送的消息
        socket.on("receiveMsg", function (data) {
            content.value += data.uname + ":" + data.msg + "\r\n";
        });
        var content = document.getElementById("content");
        var sendMsg = document.getElementById("sendMsg");
        var btn_send = document.getElementById("btn_send");
        var uname = document.getElementById("uname");

        btn_send.addEventListener("click", function () {

            var data = { "msg": sendMsg.value, "uname": uname.value };
            //给服务端发送 sendMsg事件名的消息
            socket.emit("sendMsg", data, function (data) {
                //打印消息发送成功后服务端返回的信息
                console.log("消息发送：" + JSON.stringify(data));
            });
            content.value += data.uname + ":" + data.msg + "\r\n";
            sendMsg.value = "";
        });



    </script>

</body>

</html>